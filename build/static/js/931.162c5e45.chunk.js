"use strict";(self.webpackChunkclinica=self.webpackChunkclinica||[]).push([[931],{6544:function(e,n,r){var t=r(1413),a=r(9439),i=r(5987),o=r(2791),l=r(4135),s=r(6201),c=r(5403),u=r(8550),d=r(4518),x=r(5130),h=r(184),p=["data","columns","loading"];n.Z=function(e){var n=e.data,r=e.columns,f=e.loading,Z=(0,i.Z)(e,p),m=(0,o.useState)(""),j=(0,a.Z)(m,2),I=j[0],v=j[1],g=(0,o.useState)(""),O=(0,a.Z)(g,2),E=O[0],C=O[1],A=(0,o.useState)([]),S=(0,a.Z)(A,2),b=S[0],P=S[1],y=function(e,n,r){n(),v(e[0]),C(r)},k=function(e,n,r){e(),v(""),r([""]),C("")};return(0,o.useEffect)((function(){r.length>0&&(r.map((function(e){var n;return e.filter&&Object.assign(e,(0,t.Z)({},(n=e.dataIndex,{filterDropdown:function(e){var r=e.setSelectedKeys,t=e.selectedKeys,a=e.confirm,i=e.clearFilters;return(0,h.jsxs)("div",{style:{padding:8},children:[(0,h.jsx)(u.Z,{variant:"outlined",placeholder:"Buscar...",size:"small",value:t[0],onChange:function(e){r(e.target.value?[e.target.value]:[])},onKeyDown:function(e){"Enter"===e.key&&y(t,a,n)},style:{width:188,marginBottom:8,display:"block"}}),(0,h.jsxs)(d.Z,{color:"primary",variant:"outlined",size:"small",onClick:function(){return k(i,t,r)},style:{width:90},children:["Limpiar ",(0,h.jsx)(x.Z,{})]})," ",(0,h.jsxs)(d.Z,{color:"primary",size:"small",variant:"contained",onClick:function(){return y(t,a,n)},children:["Buscar ",(0,h.jsx)(c.Z,{})]})]})},filterIcon:function(e){return(0,h.jsx)(s.Z,{style:{color:e?"#fff":"#aaa"}})},onFilter:function(e,r){return r[n].toString().toLowerCase().includes(e.toLowerCase())},onFilterDropdownVisibleChange:function(e){},render:function(e){return E===n?I:e}}))),e.sorter&&(e.sorter=function(n,r){return n[e.dataIndex]>r[e.dataIndex]?1:-1}),e})),P(r))}),[r]),(0,h.jsx)(l.Z,(0,t.Z)({bordered:!0,columns:b,dataSource:n,scroll:{x:"auto"},loading:f,rowKey:"_id"},Z))}},7818:function(e,n,r){var t=r(1413),a=r(5987),i=(r(2791),r(8870)),o=r(703),l=r(1889),s=r(890),c=r(7071),u=r(4721),d=r(184),x=["title","helper","itemComponent","children"];n.Z=function(e){var n=e.title,r=e.helper,h=e.itemComponent,p=e.children,f=(0,a.Z)(e,x);return(0,d.jsx)(i.Z,{p:1,children:(0,d.jsx)(o.Z,(0,t.Z)((0,t.Z)({},f),{},{children:(0,d.jsxs)(i.Z,{p:2,children:[(0,d.jsxs)(l.ZP,{container:!0,justifyContent:"space-between",children:[(0,d.jsxs)(l.ZP,{item:!0,children:[(0,d.jsx)(s.Z,{gutterBottom:!0,component:"p",children:(0,d.jsx)(c.Z,{component:"span",children:r&&r.toUpperCase()})}),(0,d.jsx)(s.Z,{variant:"h5",children:(0,d.jsx)("b",{children:n})})]}),(0,d.jsx)(l.ZP,{item:!0,children:h})]}),(0,d.jsx)(u.Z,{}),p]})}))})}},3931:function(e,n,r){r.r(n),r.d(n,{default:function(){return J}});var t=r(3433),a=r(5861),i=r(9439),o=r(7757),l=r.n(o),s=r(2791),c=r(890),u=r(7071),d=r(3767),x=r(8550),h=r(3466),p=r(9877),f=r(4518),Z=r(8870),m=r(7818),j=r(1975),I=r(1413),v=r(5289),g=r(5661),O=r(9157),E=r(1889),C=r(4721),A=r(3400),S=r(7123),b=r(5290),P=r(2569),y=r(7083),k=r(1502),R=r(9823),L=r(8096),M=r(829),B=r(7198),T=r(1250),w=r(184),U=["EQUIPOS BIOM\xc9DICOS","EQUIPOS MOBILIARIOS CL\xcdNICOS","EQUIPOS MOBILIARIOS ADMINISTRATIVOS","EQUIPOS MOBILIARIOS COMPLEMENTARIOS","EQUIPOS MOBILIARIOS ELECTROMEC\xc1NICOS","EQUIPOS MOBILIARIOS DE SERVICIOS GENERALES","EQUIPOS MOBILIARIOS VEH\xcdCULOS"],D=function(e){var n=e.value,r=e.onChange;return(0,w.jsxs)(L.Z,{fullWidth:!0,variant:"outlined",children:[(0,w.jsx)(M.Z,{children:"TIPO DE EQUIPO"}),(0,w.jsx)(B.Z,{value:n,onChange:function(e){return r(e.target.value)},label:"TIPO DE EQUIPO",children:U.map((function(e,n){return(0,w.jsx)(T.Z,{value:e,title:e,children:e},n)}))})]})},N=function(e){var n,r,o,d,p,Z=e.open,m=e.setOpen,L=e.setLoading,M=e.loading,B=e.data,T=e.reloadFunction,U=(0,s.useState)(Boolean(B)?B.type:null),N=(0,i.Z)(U,2),q=N[0],Q=N[1],F=(0,s.useState)(Boolean(B)?B.dates:[]),z=(0,i.Z)(F,2),G=z[0],V=z[1],W=(0,b.cI)(),_=W.register,Y=W.handleSubmit,H=W.formState.errors,K=function(){var e=(0,a.Z)(l().mark((function e(n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,q){e.next=4;break}return P.Z.warning({message:"Campos requeridos..."}),e.abrupt("return");case 4:if(L(!0),B||(n.company=k.Z.idCompany),n.type=q,n.dates=G,!B){e.next=13;break}return e.next=11,(0,j.GT)(n,B._id);case 11:e.next=15;break;case 13:return e.next=15,(0,j.bz)(n);case 15:T(),m({open:!1}),P.Z.success({message:"\xc9xito!",description:"El equipo se ".concat(Boolean(B)?"actualiz\xf3":"registr\xf3"," correctamente.")}),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),P.Z.error({message:"Error!",description:"Ocurri\xf3 un error al ".concat(Boolean(B)?"actualizar":"registrar"," la informaci\xf3n.")});case 23:return e.prev=23,L(!1),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[0,20,23,26]])})));return function(n){return e.apply(this,arguments)}}();return(0,w.jsxs)(v.Z,{open:Z,fullWidth:!0,maxWidth:"md",children:[(0,w.jsx)(g.Z,{children:(0,w.jsx)(c.Z,{variant:"p",align:"center",children:(0,w.jsxs)("b",{children:[Boolean(B)?"EDITAR":"AGREGAR"," EQUIPO"]})})}),(0,w.jsx)(y.Z,{spinning:M,children:(0,w.jsxs)("form",{onSubmit:Y(K),autoComplete:"off",children:[(0,w.jsx)(O.Z,{children:(0,w.jsxs)(E.ZP,{container:!0,spacing:2,children:[(0,w.jsx)(E.ZP,{item:!0,xs:12,children:(0,w.jsx)(D,{value:q,onChange:Q})}),(0,w.jsx)(E.ZP,{item:!0,xs:12,sm:12,children:(0,w.jsx)(x.Z,(0,I.Z)({label:"NOMBRE",autoFocus:!0,fullWidth:!0,defaultValue:Boolean(B)?B.name:"",error:Boolean(null!==(n=null===H||void 0===H?void 0:H.name)&&void 0!==n&&n)},_("name",{required:!0,maxLength:80})))}),(0,w.jsx)(E.ZP,{item:!0,xs:12,sm:6,children:(0,w.jsx)(x.Z,(0,I.Z)({label:"ETIQUETA",fullWidth:!0,defaultValue:Boolean(B)?B.etiqueta:"",error:Boolean(null!==(r=null===H||void 0===H?void 0:H.etiqueta)&&void 0!==r&&r)},_("etiqueta",{required:!0,maxLength:80})))}),(0,w.jsx)(E.ZP,{item:!0,xs:12,sm:6,children:(0,w.jsx)(x.Z,(0,I.Z)({label:"MARCA",fullWidth:!0,defaultValue:Boolean(B)?B.marca:"",error:Boolean(null!==(o=null===H||void 0===H?void 0:H.marca)&&void 0!==o&&o)},_("marca",{required:!0,maxLength:80})))}),(0,w.jsx)(E.ZP,{item:!0,xs:12,sm:6,children:(0,w.jsx)(x.Z,(0,I.Z)({label:"MODELO",fullWidth:!0,defaultValue:Boolean(B)?B.modelo:"",error:Boolean(null!==(d=null===H||void 0===H?void 0:H.modelo)&&void 0!==d&&d)},_("modelo",{required:!0,maxLength:80})))}),(0,w.jsx)(E.ZP,{item:!0,xs:12,sm:6,children:(0,w.jsx)(x.Z,(0,I.Z)({label:"SERIE",fullWidth:!0,defaultValue:Boolean(B)?B.serie:"",error:Boolean(null!==(p=null===H||void 0===H?void 0:H.serie)&&void 0!==p&&p)},_("serie",{required:!0,maxLength:80})))}),(0,w.jsxs)(E.ZP,{item:!0,xs:12,children:[(0,w.jsx)(u.Z,{children:"FECHAS DE MANTENIMIENTO"}),(0,w.jsx)(C.Z,{})]}),(0,w.jsx)(E.ZP,{item:!0,xs:12,children:G.map((function(e,n){return(0,w.jsx)(x.Z,{label:"Fecha de mantenimiento ".concat(n+1),fullWidth:!0,value:e.date,type:"date",InputLabelProps:{shrink:!0},sx:{mb:1},disabled:!e.status,InputProps:{endAdornment:(0,w.jsx)(h.Z,{position:"end",children:e.status&&(0,w.jsx)(A.Z,{onClick:function(){G.splice(n,1),V((0,t.Z)(G))},color:"error",children:(0,w.jsx)(R.Z,{})})})},onChange:function(e){G[n].date=e.target.value,V((0,t.Z)(G))}})}))}),(0,w.jsx)(E.ZP,{item:!0,xs:12,align:"center",children:(0,w.jsx)(f.Z,{variant:"outlined",onClick:function(){G.push({date:"",status:!0}),V((0,t.Z)(G))},children:"AGREGAR"})})]})}),(0,w.jsxs)(S.Z,{children:[(0,w.jsx)(f.Z,{variant:"outlined",color:"secondary",onClick:function(){return m({open:!1})},children:"CANCELAR"}),(0,w.jsx)(f.Z,{variant:"contained",color:"primary",type:"submit",children:Boolean(B)?"ACTUALIZAR":"GUARDAR"})]})]})})]})},q=r(6544),Q=r(1918),F=r(2199),z=r(8820),G=r(4433),V=r(1523),W=r(3528),_=r.n(W),Y=function(e){var n=e.data,r=e.loading,t=e.setModal,a=[{title:"Nombre",dataIndex:"name",key:"name",align:"center",sorter:!0,filter:!0},{title:"Tipo",dataIndex:"type",key:"type",align:"center",sorter:!0,filter:!0},{title:"Etiqueta",dataIndex:"etiqueta",key:"etiqueta",align:"center",sorter:!0,filter:!0},{title:"Marca",dataIndex:"marca",key:"marca",align:"center",sorter:!0,filter:!0},{title:"Modelo",dataIndex:"modelo",key:"modelo",align:"center",sorter:!0,filter:!0},{title:"Serie",dataIndex:"serie",key:"serie",align:"center",sorter:!0,filter:!0},{title:"Fechas de Mantenimiento",dataIndex:"dates",key:"dates",align:"center",sorter:!1,filter:!1,width:425,render:function(e){return(0,w.jsx)(s.Fragment,{children:e.length>0?e.map((function(e,n){var r="success";return e.status&&(r="info",_()().format()>_()(e.date).format()&&(r="error")),(0,w.jsx)(Q.Z,{label:"".concat(_()(e.date).format("D MMM YYYY").toUpperCase()," \u2500 ").concat(e.status?"error"===r?"ATRAZADO":"PENDIENTE":"REALIZADO"),color:r,variant:"outlined",size:"small"},n)})):(0,w.jsx)(u.Z,{error:!0,children:(0,w.jsx)("b",{children:"NO HAY FECHAS DE MANTENIMIENTO"})})})}},{title:"Acciones",dataIndex:"_id",key:"_id",align:"center",render:function(e,n){return(0,w.jsxs)(F.Z,{size:"small",color:"secondary",variant:"outlined",children:[(0,w.jsx)(f.Z,{variant:"contained",onClick:function(){return t({open:!0,data:n})},children:(0,w.jsx)(z.Z,{})}),(0,w.jsx)(f.Z,{component:V.rU,to:"/equipment/maintenance/".concat(e),children:(0,w.jsx)(G.Z,{})})]})}}];return(0,w.jsx)(q.Z,{columns:a,data:n,loading:r})},H=r(2269),K=r(7416),J=function(){var e=(0,s.useState)({data:null,open:!1}),n=(0,i.Z)(e,2),r=n[0],o=n[1],I=(0,s.useState)(!1),v=(0,i.Z)(I,2),g=v[0],O=v[1],E=(0,s.useState)([]),C=(0,i.Z)(E,2),A=C[0],S=C[1],b=(0,s.useState)(null),y=(0,i.Z)(b,2),k=y[0],R=y[1];(0,s.useEffect)((function(){L()}),[]);var L=function(){var e=(0,a.Z)(l().mark((function e(){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.prev=1,e.next=4,(0,j.O2)();case 4:n=e.sent,S((0,t.Z)(n.reverse())),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),P.Z.error({message:"Oops!",description:"Ocurri\xf3 un error al obtener la informaci\xf3n."});case 11:return e.prev=11,O(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=(0,a.Z)(l().mark((function e(){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.prev=1,(n=new FormData).append("file",k),e.next=6,(0,j.ex)(n);case 6:(r=e.sent).status&&(P.Z.success({message:r.message}),L(),R(null)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),P.Z.error({message:"Ocurri\xf3 un error al realizar la operaci\xf3n."});case 13:return e.prev=13,O(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}}();return(0,w.jsxs)(m.Z,{helper:"EQUIPOS",title:(0,w.jsxs)(c.Z,{variant:"inherit",children:["EQUIPOS"," ",(0,w.jsxs)(u.Z,{component:"a",href:"https://res.cloudinary.com/backet-repartos/raw/upload/v1642224920/IMPORTAR_PRODUCTOS_gmj3hz.xlsx",target:"_blank",sx:{color:"#6bc8ff"},children:[(0,w.jsx)(H.Z,{})," PLANTILLA DE IMPORTACI\xd3N"]})]}),itemComponent:(0,w.jsxs)(d.Z,{direction:"row",spacing:1,children:[(0,w.jsx)(x.Z,{label:"IMPORTACI\xd3N (archivo excel)",type:"file",InputLabelProps:{shrink:!0},onChange:function(e){return R(e.target.files[0])},InputProps:{endAdornment:(0,w.jsx)(h.Z,{position:"end",children:(0,w.jsx)(p.Z,{onClick:M,color:"primary",disabled:!k,children:(0,w.jsx)(K.Z,{})})})}}),(0,w.jsx)(f.Z,{variant:"contained",size:"large",onClick:function(){return o({open:!0,data:null})},children:"AGREGAR EQUIPO"})]}),children:[(0,w.jsx)(Z.Z,{p:1,children:(0,w.jsx)(Y,{data:A,loading:g,setModal:o})}),r.open&&(0,w.jsx)(N,{open:r.open,setOpen:o,data:r.data,setLoading:O,loading:g,reloadFunction:L})]})}}}]);
//# sourceMappingURL=931.162c5e45.chunk.js.map