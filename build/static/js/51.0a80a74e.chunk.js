"use strict";(self.webpackChunkclinica=self.webpackChunkclinica||[]).push([[51],{7818:function(e,n,r){var t=r(1413),a=r(5987),i=(r(2791),r(8870)),o=r(703),s=r(1889),l=r(890),c=r(7071),d=r(4721),u=r(184),p=["title","helper","itemComponent","children"];n.Z=function(e){var n=e.title,r=e.helper,Z=e.itemComponent,h=e.children,x=(0,a.Z)(e,p);return(0,u.jsx)(i.Z,{p:1,children:(0,u.jsx)(o.Z,(0,t.Z)((0,t.Z)({},x),{},{children:(0,u.jsxs)(i.Z,{p:2,children:[(0,u.jsxs)(s.ZP,{container:!0,justifyContent:"space-between",children:[(0,u.jsxs)(s.ZP,{item:!0,children:[(0,u.jsx)(l.Z,{gutterBottom:!0,component:"p",children:(0,u.jsx)(c.Z,{component:"span",children:r&&r.toUpperCase()})}),(0,u.jsx)(l.Z,{variant:"h5",children:(0,u.jsx)("b",{children:n})})]}),(0,u.jsx)(s.ZP,{item:!0,children:Z})]}),(0,u.jsx)(d.Z,{}),h]})}))})}},1051:function(e,n,r){r.r(n),r.d(n,{default:function(){return re}});var t=r(5861),a=r(3433),i=r(9439),o=r(7757),s=r.n(o),l=r(2791),c=r(4518),d=r(8870),u=r(1889),p=r(9012),Z=r(5523),h=r(4454),x=r(7071),m=r(7621),f=r(9585),v=r(3044),j=r(9504),g=r(890),b=r(4721),S=r(3767),I=r(1918),E=r(2363),O=r(9877),y=r(7818),C=r(1975),P=r(1413),A=r(5289),M=r(5661),R=r(9157),k=r(8550),L=r(3466),B=r(3400),N=r(7123),T=r(5290),w=r(2569),U=r(7083),D=r(1502),Q=r(9823),q=r(8096),V=r(829),z=r(7198),G=r(1250),H=r(184),W=["EQUIPOS BIOM\xc9DICOS","EQUIPOS MOBILIARIOS CL\xcdNICOS","EQUIPOS MOBILIARIOS ADMINISTRATIVOS","EQUIPOS MOBILIARIOS COMPLEMENTARIOS","EQUIPOS MOBILIARIOS ELECTROMEC\xc1NICOS","EQUIPOS MOBILIARIOS DE SERVICIOS GENERALES","EQUIPOS MOBILIARIOS VEH\xcdCULOS"],Y=function(e){var n=e.value,r=e.onChange;return(0,H.jsxs)(q.Z,{fullWidth:!0,variant:"outlined",children:[(0,H.jsx)(V.Z,{children:"TIPO DE EQUIPO"}),(0,H.jsx)(z.Z,{value:n,onChange:function(e){return r(e.target.value)},label:"TIPO DE EQUIPO",children:W.map((function(e,n){return(0,H.jsx)(G.Z,{value:e,title:e,children:e},n)}))})]})},F=function(e){var n,r,o,d,p,Z=e.open,h=e.setOpen,m=e.setLoading,f=e.loading,v=e.data,j=e.reloadFunction,S=(0,l.useState)(Boolean(v)?v.type:null),I=(0,i.Z)(S,2),E=I[0],O=I[1],y=(0,l.useState)(Boolean(v)?v.dates:[]),q=(0,i.Z)(y,2),V=q[0],z=q[1],G=(0,T.cI)(),W=G.register,F=G.handleSubmit,$=G.formState.errors,_=function(){var e=(0,t.Z)(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,E){e.next=4;break}return w.Z.warning({message:"Campos requeridos..."}),e.abrupt("return");case 4:if(m(!0),v||(n.company=D.Z.idCompany),n.type=E,n.dates=V,!v){e.next=13;break}return e.next=11,(0,C.GT)(n,v._id);case 11:e.next=15;break;case 13:return e.next=15,(0,C.bz)(n);case 15:j(),h({open:!1}),w.Z.success({message:"\xc9xito!",description:"El equipo se ".concat(Boolean(v)?"actualiz\xf3":"registr\xf3"," correctamente.")}),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),w.Z.error({message:"Error!",description:"Ocurri\xf3 un error al ".concat(Boolean(v)?"actualizar":"registrar"," la informaci\xf3n.")});case 23:return e.prev=23,m(!1),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[0,20,23,26]])})));return function(n){return e.apply(this,arguments)}}();return(0,H.jsxs)(A.Z,{open:Z,fullWidth:!0,maxWidth:"md",children:[(0,H.jsx)(M.Z,{children:(0,H.jsx)(g.Z,{variant:"p",align:"center",children:(0,H.jsxs)("b",{children:[Boolean(v)?"EDITAR":"AGREGAR"," EQUIPO"]})})}),(0,H.jsx)(U.Z,{spinning:f,children:(0,H.jsxs)("form",{onSubmit:F(_),autoComplete:"off",children:[(0,H.jsx)(R.Z,{children:(0,H.jsxs)(u.ZP,{container:!0,spacing:2,children:[(0,H.jsx)(u.ZP,{item:!0,xs:12,children:(0,H.jsx)(Y,{value:E,onChange:O})}),(0,H.jsx)(u.ZP,{item:!0,xs:12,sm:12,children:(0,H.jsx)(k.Z,(0,P.Z)({label:"NOMBRE",autoFocus:!0,fullWidth:!0,defaultValue:Boolean(v)?v.name:"",error:Boolean(null!==(n=null===$||void 0===$?void 0:$.name)&&void 0!==n&&n)},W("name",{required:!0,maxLength:80})))}),(0,H.jsx)(u.ZP,{item:!0,xs:12,sm:6,children:(0,H.jsx)(k.Z,(0,P.Z)({label:"ETIQUETA",fullWidth:!0,defaultValue:Boolean(v)?v.etiqueta:"",error:Boolean(null!==(r=null===$||void 0===$?void 0:$.etiqueta)&&void 0!==r&&r)},W("etiqueta",{required:!0,maxLength:80})))}),(0,H.jsx)(u.ZP,{item:!0,xs:12,sm:6,children:(0,H.jsx)(k.Z,(0,P.Z)({label:"MARCA",fullWidth:!0,defaultValue:Boolean(v)?v.marca:"",error:Boolean(null!==(o=null===$||void 0===$?void 0:$.marca)&&void 0!==o&&o)},W("marca",{required:!0,maxLength:80})))}),(0,H.jsx)(u.ZP,{item:!0,xs:12,sm:6,children:(0,H.jsx)(k.Z,(0,P.Z)({label:"MODELO",fullWidth:!0,defaultValue:Boolean(v)?v.modelo:"",error:Boolean(null!==(d=null===$||void 0===$?void 0:$.modelo)&&void 0!==d&&d)},W("modelo",{required:!0,maxLength:80})))}),(0,H.jsx)(u.ZP,{item:!0,xs:12,sm:6,children:(0,H.jsx)(k.Z,(0,P.Z)({label:"SERIE",fullWidth:!0,defaultValue:Boolean(v)?v.serie:"",error:Boolean(null!==(p=null===$||void 0===$?void 0:$.serie)&&void 0!==p&&p)},W("serie",{required:!0,maxLength:80})))}),(0,H.jsxs)(u.ZP,{item:!0,xs:12,children:[(0,H.jsx)(x.Z,{children:"FECHAS DE MANTENIMIENTO"}),(0,H.jsx)(b.Z,{})]}),(0,H.jsx)(u.ZP,{item:!0,xs:12,children:V.map((function(e,n){return(0,H.jsx)(k.Z,{label:"Fecha de mantenimiento ".concat(n+1),fullWidth:!0,value:e.date,type:"date",InputLabelProps:{shrink:!0},sx:{mb:1},disabled:!e.status,InputProps:{endAdornment:(0,H.jsx)(L.Z,{position:"end",children:e.status&&(0,H.jsx)(B.Z,{onClick:function(){V.splice(n,1),z((0,a.Z)(V))},color:"error",children:(0,H.jsx)(Q.Z,{})})})},onChange:function(e){V[n].date=e.target.value,z((0,a.Z)(V))}})}))}),(0,H.jsx)(u.ZP,{item:!0,xs:12,align:"center",children:(0,H.jsx)(c.Z,{variant:"outlined",onClick:function(){V.push({date:"",status:!0}),z((0,a.Z)(V))},children:"AGREGAR"})})]})}),(0,H.jsxs)(N.Z,{children:[(0,H.jsx)(c.Z,{variant:"outlined",color:"secondary",onClick:function(){return h({open:!1})},children:"CANCELAR"}),(0,H.jsx)(c.Z,{variant:"contained",color:"primary",type:"submit",children:Boolean(v)?"ACTUALIZAR":"GUARDAR"})]})]})})]})},$=r(9421),_=r(1286),J=r(3528),K=r.n(J),X=r(2618),ee=r(1523);function ne(e,n){return e.filter((function(e){return-1!==n.indexOf(e)}))}var re=function(){var e=(0,l.useState)({data:null,open:!1}),n=(0,i.Z)(e,2),r=n[0],o=n[1],m=(0,l.useState)(!1),f=(0,i.Z)(m,2),v=f[0],j=f[1],g=(0,l.useState)([]),b=(0,i.Z)(g,2),S=b[0],I=b[1],E=(0,l.useState)((0,a.Z)(W)),O=(0,i.Z)(E,2),P=O[0],A=O[1];(0,l.useEffect)((function(){M()}),[]);var M=function(){var e=(0,t.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.prev=1,e.next=4,(0,C.O2)();case 4:n=e.sent,I(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),w.Z.error({message:"Oops!",description:"Ocurri\xf3 un error al obtener la informaci\xf3n."});case 11:return e.prev=11,j(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(){return e.apply(this,arguments)}}();return(0,H.jsxs)(y.Z,{helper:"EQUIPOS",title:"EQUIPOS",itemComponent:(0,H.jsx)(c.Z,{variant:"contained",size:"large",onClick:function(){return o({open:!0,data:null})},children:"AGREGAR EQUIPO"}),children:[(0,H.jsx)(U.Z,{spinning:v,children:(0,H.jsx)(d.Z,{p:1,children:(0,H.jsxs)(u.ZP,{container:!0,spacing:1,children:[(0,H.jsx)(u.ZP,{item:!0,xs:12,children:(0,H.jsx)(p.Z,{row:!0,children:W.map((function(e,n){return(0,H.jsx)(Z.Z,{sx:{mx:1},control:(0,H.jsx)(h.Z,{sx:{p:0},name:e,onClick:function(){return function(e){if(ne(P,W).includes(e)){var n=P.findIndex((function(n){return n===e}));P.splice(n,1)}else P.push(e);A((0,a.Z)(P))}(e)},checked:ne(P,W).includes(e)}),label:(0,H.jsx)(x.Z,{children:e})},n)}))})}),S.length>0?S.filter((function(e){return P.includes(e.type)})).map((function(e,n){return(0,H.jsx)(u.ZP,{item:!0,xs:12,sm:6,md:4,lg:4,xl:3,children:(0,H.jsx)(te,{row:e,setModal:o})},n)})):(0,H.jsx)(u.ZP,{item:!0,xs:12,children:(0,H.jsx)($.Z,{description:"AQU\xcd SE MOSTRAR\xc1N LOS EQUIPOS"})})]})})}),r.open&&(0,H.jsx)(F,{open:r.open,setOpen:o,data:r.data,setLoading:j,loading:v,reloadFunction:M})]})},te=function(e){var n=e.row,r=e.setModal;return(0,H.jsxs)(m.Z,{variant:"outlined",sx:{height:"100%"},children:[(0,H.jsx)(f.Z,{avatar:(0,H.jsx)(v.Z,{children:n.name.toUpperCase().charAt(0)}),title:n.name,subheader:(0,H.jsx)(x.Z,{sx:{fontSize:11},children:n.type})}),(0,H.jsxs)(j.Z,{sx:{height:"calc((100%) - 130px)"},children:[(0,H.jsxs)(g.Z,{color:"text.secondary",variant:"body2",children:["Etiqueta \u2022 ",n.etiqueta]}),(0,H.jsx)(b.Z,{}),(0,H.jsxs)(g.Z,{color:"text.secondary",variant:"body2",children:["Marca \u2022 ",n.marca]}),(0,H.jsx)(b.Z,{}),(0,H.jsxs)(g.Z,{color:"text.secondary",variant:"body2",children:["Modelo \u2022 ",n.modelo]}),(0,H.jsx)(b.Z,{}),(0,H.jsxs)(g.Z,{color:"text.secondary",variant:"body2",children:["Serie \u2022 ",n.serie]}),(0,H.jsx)(b.Z,{}),(0,H.jsx)(S.Z,{spacing:.25,sx:{mt:1},children:n.dates.map((function(e,n){var r="success";return e.status&&(r="info",K()().format("YYYY-MM-DD")>e.date&&(r="error")),(0,H.jsx)(I.Z,{label:"".concat(K()(e.date).format("ddd D MMM YYYY").toUpperCase()," \u2500 ").concat(e.status?"error"===r?"ATRAZADO":"PENDIENTE":"REALIZADO"),color:r,variant:"outlined",size:"small"},n)}))})]}),(0,H.jsxs)(E.Z,{disableSpacing:!0,children:[(0,H.jsx)(O.Z,{size:"small",onClick:function(){return r({data:n,open:!0})},color:"secondary",children:(0,H.jsx)(_.Z,{})}),(0,H.jsxs)(c.Z,{variant:"contained",sx:{marginLeft:"auto"},component:ee.rU,to:"/equipment/maintenance/".concat(n._id),children:["MANTENIMIENTO ",(0,H.jsx)(X.Z,{})]})]})]})}},2618:function(e,n,r){var t=r(5318);n.Z=void 0;var a=t(r(5649)),i=r(184),o=(0,a.default)((0,i.jsx)("path",{d:"M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5z"}),"CallMade");n.Z=o},1286:function(e,n,r){var t=r(5318);n.Z=void 0;var a=t(r(5649)),i=r(184),o=(0,a.default)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");n.Z=o},2363:function(e,n,r){r.d(n,{Z:function(){return x}});var t=r(3366),a=r(7462),i=r(2791),o=r(8182),s=r(767),l=r(7630),c=r(3736),d=r(5159);function u(e){return(0,d.Z)("MuiCardActions",e)}(0,r(208).Z)("MuiCardActions",["root","spacing"]);var p=r(184),Z=["disableSpacing","className"],h=(0,l.ZP)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:function(e,n){var r=e.ownerState;return[n.root,!r.disableSpacing&&n.spacing]}})((function(e){var n=e.ownerState;return(0,a.Z)({display:"flex",alignItems:"center",padding:8},!n.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})})),x=i.forwardRef((function(e,n){var r=(0,c.Z)({props:e,name:"MuiCardActions"}),i=r.disableSpacing,l=void 0!==i&&i,d=r.className,x=(0,t.Z)(r,Z),m=(0,a.Z)({},r,{disableSpacing:l}),f=function(e){var n=e.classes,r={root:["root",!e.disableSpacing&&"spacing"]};return(0,s.Z)(r,u,n)}(m);return(0,p.jsx)(h,(0,a.Z)({className:(0,o.Z)(f.root,d),ownerState:m,ref:n},x))}))},9585:function(e,n,r){r.d(n,{Z:function(){return b}});var t=r(4942),a=r(3366),i=r(7462),o=r(2791),s=r(8182),l=r(767),c=r(890),d=r(3736),u=r(7630),p=r(5159);function Z(e){return(0,p.Z)("MuiCardHeader",e)}var h=(0,r(208).Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]),x=r(184),m=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],f=(0,u.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:function(e,n){var r;return(0,i.Z)((r={},(0,t.Z)(r,"& .".concat(h.title),n.title),(0,t.Z)(r,"& .".concat(h.subheader),n.subheader),r),n.root)}})({display:"flex",alignItems:"center",padding:16}),v=(0,u.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:function(e,n){return n.avatar}})({display:"flex",flex:"0 0 auto",marginRight:16}),j=(0,u.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:function(e,n){return n.action}})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),g=(0,u.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:function(e,n){return n.content}})({flex:"1 1 auto"}),b=o.forwardRef((function(e,n){var r=(0,d.Z)({props:e,name:"MuiCardHeader"}),t=r.action,o=r.avatar,u=r.className,p=r.component,h=void 0===p?"div":p,b=r.disableTypography,S=void 0!==b&&b,I=r.subheader,E=r.subheaderTypographyProps,O=r.title,y=r.titleTypographyProps,C=(0,a.Z)(r,m),P=(0,i.Z)({},r,{component:h,disableTypography:S}),A=function(e){var n=e.classes;return(0,l.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},Z,n)}(P),M=O;null==M||M.type===c.Z||S||(M=(0,x.jsx)(c.Z,(0,i.Z)({variant:o?"body2":"h5",className:A.title,component:"span",display:"block"},y,{children:M})));var R=I;return null==R||R.type===c.Z||S||(R=(0,x.jsx)(c.Z,(0,i.Z)({variant:o?"body2":"body1",className:A.subheader,color:"text.secondary",component:"span",display:"block"},E,{children:R}))),(0,x.jsxs)(f,(0,i.Z)({className:(0,s.Z)(A.root,u),as:h,ref:n,ownerState:P},C,{children:[o&&(0,x.jsx)(v,{className:A.avatar,ownerState:P,children:o}),(0,x.jsxs)(g,{className:A.content,ownerState:P,children:[M,R]}),t&&(0,x.jsx)(j,{className:A.action,ownerState:P,children:t})]}))}))},3767:function(e,n,r){var t=r(4942),a=r(3366),i=r(7462),o=r(2791),s=r(1184),l=r(5682),c=r(8519),d=r(2466),u=r(7630),p=r(3736),Z=r(184),h=["component","direction","spacing","divider","children"];function x(e,n){var r=o.Children.toArray(e).filter(Boolean);return r.reduce((function(e,t,a){return e.push(t),a<r.length-1&&e.push(o.cloneElement(n,{key:"separator-".concat(a)})),e}),[])}var m=(0,u.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:function(e,n){return[n.root]}})((function(e){var n=e.ownerState,r=e.theme,a=(0,i.Z)({display:"flex"},(0,s.k9)({theme:r},(0,s.P$)({values:n.direction,breakpoints:r.breakpoints.values}),(function(e){return{flexDirection:e}})));if(n.spacing){var o=(0,l.hB)(r),c=Object.keys(r.breakpoints.values).reduce((function(e,r){return null==n.spacing[r]&&null==n.direction[r]||(e[r]=!0),e}),{}),u=(0,s.P$)({values:n.direction,base:c}),p=(0,s.P$)({values:n.spacing,base:c});a=(0,d.Z)(a,(0,s.k9)({theme:r},p,(function(e,r){return{"& > :not(style) + :not(style)":(0,t.Z)({margin:0},"margin".concat((a=r?u[r]:n.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[a])),(0,l.NA)(o,e))};var a})))}return a})),f=o.forwardRef((function(e,n){var r=(0,p.Z)({props:e,name:"MuiStack"}),t=(0,c.Z)(r),o=t.component,s=void 0===o?"div":o,l=t.direction,d=void 0===l?"column":l,u=t.spacing,f=void 0===u?0:u,v=t.divider,j=t.children,g=(0,a.Z)(t,h),b={direction:d,spacing:f};return(0,Z.jsx)(m,(0,i.Z)({as:s,ownerState:b,ref:n},g,{children:v?x(j,v):j}))}));n.Z=f}}]);
//# sourceMappingURL=51.0a80a74e.chunk.js.map