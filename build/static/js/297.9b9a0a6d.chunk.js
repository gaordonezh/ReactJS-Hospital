"use strict";(self.webpackChunkclinica=self.webpackChunkclinica||[]).push([[297],{7818:function(e,n,r){var t=r(1413),s=r(5987),a=(r(2791),r(8870)),i=r(703),c=r(1889),l=r(890),o=r(7071),d=r(4721),u=r(184),h=["title","helper","itemComponent","children"];n.Z=function(e){var n=e.title,r=e.helper,x=e.itemComponent,j=e.children,Z=(0,s.Z)(e,h);return(0,u.jsx)(a.Z,{p:1,children:(0,u.jsx)(i.Z,(0,t.Z)((0,t.Z)({},Z),{},{children:(0,u.jsxs)(a.Z,{p:2,children:[(0,u.jsxs)(c.ZP,{container:!0,justifyContent:"space-between",children:[(0,u.jsxs)(c.ZP,{item:!0,children:[(0,u.jsx)(l.Z,{gutterBottom:!0,component:"p",children:(0,u.jsx)(o.Z,{component:"span",children:r&&r.toUpperCase()})}),(0,u.jsx)(l.Z,{variant:"h5",children:(0,u.jsx)("b",{children:n})})]}),(0,u.jsx)(c.ZP,{item:!0,children:x})]}),(0,u.jsx)(d.Z,{}),j]})}))})}},2946:function(e,n,r){var t=r(2791),s=r(6551),a=r(7071),i=r(184),c=s.Z.Option;n.Z=function(e){var n=e.data,r=void 0===n?[]:n,l=e.value,o=e.onChange,d=e.title,u=void 0===d?"PERSONAL":d;return(0,i.jsxs)(t.Fragment,{children:[(0,i.jsx)(a.Z,{children:u}),(0,i.jsxs)(s.Z,{size:"large",style:{width:"100%"},showSearch:!0,value:l,onChange:o,filterOption:function(e,n){return n.props.title.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(e.toLowerCase())},children:[(0,i.jsx)(c,{value:null,title:"",children:"-- Ninguno --"},null),r.map((function(e,n){return(0,i.jsxs)(c,{value:e._id,title:"".concat(e.start," - ").concat(e.end),children:[e.f_name," ",e.l_name," ",(0,i.jsxs)(a.Z,{component:"span",children:[e.rol," ",e.dni]})]},n)}))]})]})}},696:function(e,n,r){r.r(n),r.d(n,{default:function(){return ne}});var t=r(5987),s=r(1413),a=r(5861),i=r(9439),c=r(7757),l=r.n(c),o=r(2791),d=r(7818),u=r(5228),h=r(3896),x=r(1975),j=r(869),Z=r(7880),p=r(7621),f=r(1889),g=r(9504),m=r(890),v=r(4518),y=r(8550),b=r(2569),k=r(1502),C=r(9823),S=r(3329),O=r(184),R=function(e){var n=e.data,r=e.setLoading,t=e.refresh,s=(0,o.useState)({open:!1,data:null}),a=(0,i.Z)(s,2),c=a[0],l=a[1];return(0,O.jsxs)(f.ZP,{container:!0,spacing:1,justifyContent:"center",children:[(0,O.jsx)(f.ZP,{item:!0,xs:12}),n.map((function(e,n){return(0,O.jsx)(f.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,xl:2,children:(0,O.jsx)(p.Z,{elevation:2,style:{height:"100%"},children:(0,O.jsx)(g.Z,{style:{height:"100%"},children:(0,O.jsx)(f.ZP,{container:!0,justifyContent:"center",alignItems:"center",style:{height:"100%"},children:(0,O.jsxs)(f.ZP,{item:!0,align:"center",children:[(0,O.jsxs)(m.Z,{variant:"h6",children:[(0,O.jsx)("b",{children:"Inicio \u2022 "}),e.start]}),(0,O.jsxs)(m.Z,{variant:"h6",children:[(0,O.jsx)("b",{children:"Fin \u2022 "}),e.end]}),(0,O.jsx)("br",{}),(0,O.jsx)(v.Z,{size:"small",variant:"contained",onClick:function(){return l({open:!0,data:e})},children:"Editar"})]})})})})},n)})),(0,O.jsx)(f.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,xl:2,children:c.open?(0,O.jsx)(A,{setLoading:r,setFormVisible:l,refreshFunction:t,data:c.data}):(0,O.jsx)(p.Z,{elevation:2,style:{height:"100%"},children:(0,O.jsx)(g.Z,{style:{height:"100%"},children:(0,O.jsx)(f.ZP,{container:!0,justifyContent:"center",alignItems:"center",style:{height:"100%"},children:(0,O.jsx)(v.Z,{size:"small",variant:"outlined",onClick:function(){return l({open:!0})},children:"AGREGAR"})})})})})]})},A=function(e){var n=e.setLoading,r=e.setFormVisible,t=e.refreshFunction,c=e.data,d=(0,o.useState)({start:Boolean(c)?c.start:"08:00",end:Boolean(c)?c.end:"17:00"}),u=(0,i.Z)(d,2),h=u[0],j=u[1],Z=function(){var e=(0,a.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!h.start||!h.end){e.next=16;break}if(n(!0),c||(h.company=k.Z.idCompany),!c){e.next=9;break}return e.next=7,(0,x.Q$)(h,c._id);case 7:e.next=11;break;case 9:return e.next=11,(0,x.jb)(h);case 11:t(!0,!1,!1),b.Z.success({message:"El horario se ".concat(Boolean(c)?"registr\xf3":"actualiz\xf3"," correctamente!")}),r({open:!1}),e.next=17;break;case 16:b.Z.warning({message:"La horas horas no deben estar vac\xedas!"});case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),b.Z.error({message:"Oops!",description:"Ocurri\xf3 un error"});case 22:return e.prev=22,n(!1),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[0,19,22,25]])})));return function(){return e.apply(this,arguments)}}();return(0,O.jsx)(p.Z,{elevation:2,align:"center",children:(0,O.jsx)(g.Z,{children:(0,O.jsxs)(f.ZP,{container:!0,spacing:1,children:[(0,O.jsx)(f.ZP,{item:!0,xs:12,children:(0,O.jsx)(m.Z,{variant:"subtitle1",children:(0,O.jsxs)("b",{children:[Boolean(c)?"Editar":"Register nuevo"," horario"]})})}),(0,O.jsx)(f.ZP,{item:!0,xs:12,children:(0,O.jsx)(y.Z,{size:"small",label:"Hora de inicio",InputLabelProps:{shrink:!0},type:"time",fullWidth:!0,value:h.start,onChange:function(e){return j((0,s.Z)((0,s.Z)({},h),{},{start:e.target.value}))}})}),(0,O.jsx)(f.ZP,{item:!0,xs:12,children:(0,O.jsx)(y.Z,{size:"small",label:"Hora de finalizaci\xf3n",InputLabelProps:{shrink:!0},type:"time",fullWidth:!0,value:h.end,onChange:function(e){return j((0,s.Z)((0,s.Z)({},h),{},{end:e.target.value}))}})}),(0,O.jsxs)(f.ZP,{item:!0,xs:12,children:[(0,O.jsx)(v.Z,{variant:"outlined",color:"secondary",onClick:function(){return r({open:!1})},children:(0,O.jsx)(C.Z,{})})," ",(0,O.jsx)(v.Z,{variant:"contained",onClick:Z,children:(0,O.jsx)(S.Z,{})})]})]})})})},w=r(3433),E=r(5289),L=r(5661),P=r(9157),B=r(7123),I=r(5523),N=r(7071),z=r(9955),D=r(9836),F=r(3382),G=r(3994),_=r(9281),M=r(6890),T=r(5855),U=r(6551),H=U.Z.Option,V=function(e){var n=e.data,r=void 0===n?[]:n,t=e.value,s=e.onChange;return(0,O.jsxs)(o.Fragment,{children:[(0,O.jsx)(N.Z,{children:"HORARIOS"}),(0,O.jsxs)(U.Z,{size:"large",style:{width:"100%"},showSearch:!0,value:t,onChange:s,filterOption:function(e,n){return n.props.title.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(e.toLowerCase())},children:[(0,O.jsx)(H,{value:null,title:"",children:"-- Ninguno --"},null),r.map((function(e,n){return(0,O.jsxs)(H,{value:e._id,title:"".concat(e.start," - ").concat(e.end),children:[(0,O.jsx)("b",{children:e.start})," -- a -- ",(0,O.jsx)("b",{children:e.end})]},n)}))]})]})},W=r(2946),J=r(9284),Q=r(6378),q=r(1286),Y=r(7083),$=function(e){var n=e.horarios,r=e.users,t=e.setLoading,s=e.refresh,a=e.loading,c=e.schedules,l=(0,o.useState)({open:!1,data:null}),d=(0,i.Z)(l,2),u=d[0],h=d[1];return(0,O.jsxs)(o.Fragment,{children:[(0,O.jsx)(_.Z,{children:(0,O.jsxs)(D.Z,{className:"table",size:"small",children:[(0,O.jsx)(M.Z,{children:(0,O.jsxs)(T.Z,{children:[(0,O.jsx)(G.Z,{align:"center",children:(0,O.jsx)(v.Z,{variant:"contained",style:{border:"1px solid #fff"},onClick:function(){return h({open:!0})},children:"AGREGAR"})}),["HORARIO","LUNES","MARTES","MI\xc9RCOLES","JUEVES","VIERNES","S\xc1BADO","DOMINGO","EDITAR"].map((function(e,n){return(0,O.jsx)(G.Z,{align:"center",children:e},n)}))]})}),c.length>0?(0,O.jsx)(F.Z,{children:c.map((function(e,n){return(0,O.jsxs)(T.Z,{children:[(0,O.jsxs)(G.Z,{component:"th",scope:"row",children:[e.user.f_name," ",e.user.l_name]}),(0,O.jsxs)(G.Z,{align:"center",children:[e.schedule.start,"  ",e.schedule.end]}),(0,O.jsx)(G.Z,{align:"center",children:(0,O.jsx)(K,{check:e.monday})}),(0,O.jsx)(G.Z,{align:"center",children:(0,O.jsx)(K,{check:e.tuesday})}),(0,O.jsx)(G.Z,{align:"center",children:(0,O.jsx)(K,{check:e.wednesday})}),(0,O.jsx)(G.Z,{align:"center",children:(0,O.jsx)(K,{check:e.thursday})}),(0,O.jsx)(G.Z,{align:"center",children:(0,O.jsx)(K,{check:e.friday})}),(0,O.jsx)(G.Z,{align:"center",children:(0,O.jsx)(K,{check:e.saturday})}),(0,O.jsx)(G.Z,{align:"center",children:(0,O.jsx)(K,{check:e.sunday})}),(0,O.jsx)(G.Z,{align:"center",children:(0,O.jsx)(v.Z,{variant:"contained",size:"small",onClick:function(){return h({data:e,open:!0})},children:(0,O.jsx)(q.Z,{})})})]},n)}))}):(0,O.jsx)("caption",{children:(0,O.jsx)("div",{align:"center",children:"AQU\xcd SE MOSTRAR\xc1 LA PROGRAMACI\xd3N DE HORARIOS"})})]})}),u.open&&(0,O.jsx)(X,{open:u.open,setOpen:h,horarios:n,users:r,setLoading:t,refresh:s,loading:a,data:u.data})]})},K=function(e){return e.check?(0,O.jsx)(J.Z,{color:"success"}):(0,O.jsx)(Q.Z,{color:"action"})},X=function(e){var n=e.open,r=e.setOpen,t=e.horarios,s=e.users,c=e.setLoading,d=e.refresh,u=e.loading,h=e.data,j=(0,o.useState)([{label:"LUNES",key:"monday",selected:!!Boolean(h)&&h.monday},{label:"MARTES",key:"tuesday",selected:!!Boolean(h)&&h.tuesday},{label:"MI\xc9RCOLES",key:"wednesday",selected:!!Boolean(h)&&h.wednesday},{label:"JUEVES",key:"thursday",selected:!!Boolean(h)&&h.thursday},{label:"VIERNES",key:"friday",selected:!!Boolean(h)&&h.friday},{label:"S\xc1BADO",key:"saturday",selected:!!Boolean(h)&&h.saturday},{label:"DOMINGO",key:"sunday",selected:!!Boolean(h)&&h.sunday}]),Z=(0,i.Z)(j,2),p=Z[0],g=Z[1],y=(0,o.useState)(Boolean(h)?h.schedule._id:null),C=(0,i.Z)(y,2),S=C[0],R=C[1],A=(0,o.useState)(Boolean(h)?h.user._id:null),D=(0,i.Z)(A,2),F=D[0],G=D[1],_=function(){var e=(0,a.Z)(l().mark((function e(){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!F||!S){e.next=17;break}if(c(!0),n={schedule:S,monday:p[0].selected,tuesday:p[1].selected,wednesday:p[2].selected,thursday:p[3].selected,friday:p[4].selected,saturday:p[5].selected,sunday:p[6].selected},Boolean(h)||(n.user=F,n.company=k.Z.idCompany),!h){e.next=10;break}return e.next=8,(0,x.tj)(n,h._id);case 8:e.next=12;break;case 10:return e.next=12,(0,x.Yg)(n);case 12:b.Z.success({message:"La programaci\xf3n de d\xedas se ".concat(Boolean(h)?"actualiz\xf3":"realiz\xf3"," con \xe9xito.")}),d(!1,!1,!0),r({open:!1}),e.next=18;break;case 17:b.Z.warning({message:"Debe seleccionar los campos requeridos"});case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),b.Z.error({message:"Oops!",description:"Ocurri\xf3 un error al guardar la informaci\xf3n."});case 23:return e.prev=23,c(!1),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[0,20,23,26]])})));return function(){return e.apply(this,arguments)}}();return(0,O.jsxs)(E.Z,{open:n,onClose:function(){return r({open:!1})},fullWidth:!0,children:[(0,O.jsx)(L.Z,{children:(0,O.jsx)(m.Z,{align:"center",children:(0,O.jsx)("b",{children:"AGREGAR"})})}),(0,O.jsx)(P.Z,{children:(0,O.jsx)(Y.Z,{spinning:u,children:(0,O.jsxs)(f.ZP,{container:!0,spacing:1,justifyContent:"center",children:[(0,O.jsx)(f.ZP,{item:!0,xs:12,children:(0,O.jsx)(V,{data:t,value:S,onChange:function(e){return R(e)}})}),!Boolean(h)&&(0,O.jsx)(f.ZP,{item:!0,xs:12,children:(0,O.jsx)(W.Z,{data:s,value:F,onChange:function(e){return G(e)}})}),(0,O.jsxs)(f.ZP,{item:!0,xs:12,children:[(0,O.jsx)(N.Z,{children:"D\xcdAS"}),p.map((function(e,n){return(0,O.jsx)(I.Z,{control:(0,O.jsx)(z.Z,{checked:e.selected,onChange:function(){return function(e){p[e].selected=!p[e].selected,g((0,w.Z)(p))}(n)},name:e.key}),label:e.label},e.key)}))]})]})})}),(0,O.jsxs)(B.Z,{children:[(0,O.jsx)(v.Z,{variant:"outlined",color:"secondary",onClick:function(){return r({open:!1})},children:"CANCELAR"}),(0,O.jsx)(v.Z,{variant:"contained",onClick:_,children:"GUARDAR"})]})]})},ee=["children","value","index"],ne=function(){var e=(0,o.useState)(0),n=(0,i.Z)(e,2),r=n[0],t=n[1],c=(0,o.useState)(!1),p=(0,i.Z)(c,2),f=p[0],g=p[1],m=(0,o.useState)([]),v=(0,i.Z)(m,2),y=v[0],k=v[1],C=(0,o.useState)([]),S=(0,i.Z)(C,2),A=S[0],w=S[1],E=(0,o.useState)([]),L=(0,i.Z)(E,2),P=L[0],B=L[1];(0,o.useEffect)((function(){I()}),[]);var I=function(){var e=(0,a.Z)(l().mark((function e(){var n,r,t,s,a,i,c=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(c.length>0&&void 0!==c[0])||c[0],r=!(c.length>1&&void 0!==c[1])||c[1],t=!(c.length>2&&void 0!==c[2])||c[2],g(!0),e.prev=4,!n){e.next=10;break}return e.next=8,(0,x.ao)();case 8:s=e.sent,k(s);case 10:if(!r){e.next=15;break}return e.next=13,(0,x.Rf)();case 13:a=e.sent,B(a);case 15:if(!t){e.next=20;break}return e.next=18,(0,x.gw)();case 18:i=e.sent,w(i);case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(4),b.Z.error({message:"Oops!",description:"Ocurri\xf3 un error al obtener la informaci\xf3n."});case 25:return e.prev=25,g(!1),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[4,22,25,28]])})));return function(){return e.apply(this,arguments)}}();return(0,O.jsx)(d.Z,{helper:"PERSONAL",title:"HORARIOS LABORALES",children:(0,O.jsx)(Y.Z,{spinning:f,children:(0,O.jsxs)(o.Fragment,{children:[(0,O.jsxs)(u.Z,{value:r,onChange:function(e,n){return t(n)},indicatorColor:"primary",textColor:"primary",variant:"fullWidth",children:[(0,O.jsx)(h.Z,(0,s.Z)({icon:(0,O.jsx)(Z.Z,{}),label:"LISTADO"},te(0))),(0,O.jsx)(h.Z,(0,s.Z)({icon:(0,O.jsx)(j.Z,{}),label:"REGISTRO"},te(1)))]}),(0,O.jsx)(re,{value:r,index:0,children:(0,O.jsx)($,{horarios:y,users:P,setLoading:g,refresh:I,loading:f,schedules:A})}),(0,O.jsx)(re,{value:r,index:1,children:(0,O.jsx)(R,{setLoading:g,data:y,refresh:I})})]})})})};function re(e){var n=e.children,r=e.value,a=e.index,i=(0,t.Z)(e,ee);return(0,O.jsx)("div",(0,s.Z)((0,s.Z)({role:"tabpanel",hidden:r!==a,id:"full-width-tabpanel-".concat(a),"aria-labelledby":"full-width-tab-".concat(a),style:{borderTop:"1px solid #1976d2"}},i),{},{children:r===a&&n}))}function te(e){return{id:"full-width-tab-".concat(e),"aria-controls":"full-width-tabpanel-".concat(e)}}}}]);
//# sourceMappingURL=297.9b9a0a6d.chunk.js.map